<!DOCTYPE html>
<html lang="en">
   <head><meta name="robots" content="noindex">
      <title>Demo</title>
      <link rel="stylesheet" type="text/css" href="yapilyui.css">
      <link rel="shortcut icon" href="icons/icon-48x48.png">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <script src="js/highlight.pack.js"></script>
          <script async="" src="js/back.js"></script>
      <meta charset="UTF-8">
   </head>
   <body class="fixed-width grid-dashboard applications" >
      <script>hljs.initHighlightingOnLoad();</script>
      <header id="top" class="flex justify-space-between">
         <div class="isologo">
            <svg width="171" height="29" viewBox="0 0 171 29" fill="none" xmlns="http://www.w3.org/2000/svg">
               <g clip-path="url(#clip0)">
                  <path d="M51.2952 13.9202L45.8099 4.47302H41.9043L49.3999 18.1423V24.5734H53.2484V17.9981L60.5692 4.47302H56.6926L51.2952 13.9202Z" />
                  <path d="M74.1762 4.47278L65.3594 24.5732H69.352L71.1321 20.3247H80.952L82.7329 24.5732H86.868L78.1671 4.47278H74.1762ZM72.5104 17.0204L76.0706 8.57969L79.5736 17.0204H72.5104Z" />
                  <path d="M109.336 6.28272C107.948 5.07666 105.991 4.47278 103.463 4.47278H95.2227V24.5732H99.0711V18.6572H103.463C105.991 18.6572 107.948 18.0226 109.336 16.7492C110.724 15.4757 111.417 13.6914 111.417 11.3944C111.417 9.1921 110.724 7.48878 109.336 6.28272ZM106.609 14.3225C105.832 14.9537 104.718 15.2702 103.262 15.2702H99.0711V7.83251H103.262C104.718 7.83251 105.832 8.13872 106.609 8.75113C107.384 9.3644 107.77 10.283 107.77 11.5087C107.771 12.7531 107.384 13.6905 106.609 14.3225Z" />
                  <path d="M123.709 4.47278H119.861V24.5723H123.709V4.47278Z" />
                  <path d="M138.352 4.47278H134.506V24.5732H147.024V21.0983H138.352V4.47278Z" />
                  <path d="M166.359 4.47278L160.96 13.92L155.475 4.47278H151.571L159.066 18.142V24.5732H162.914V17.9987L170.236 4.47278H166.359Z" />
                  <path d="M24.4686 0.0479561C21.8314 0.0837796 19.722 2.25025 19.757 4.88669L19.8005 8.07584C19.8073 8.64049 19.5907 9.18466 19.1975 9.58981L19.0397 9.75187C18.6456 10.1587 18.1049 10.3924 17.5385 10.3992L17.0881 10.4061C17.089 10.4061 17.089 10.4069 17.089 10.4086C16.3427 9.92928 15.4514 9.65463 14.4978 9.66657C13.6806 9.67766 12.9156 9.89772 12.2503 10.2756C12.1027 10.2687 11.9577 10.256 11.8084 10.2577L11.7573 10.2585C11.1935 10.2662 10.6484 10.0504 10.2441 9.65634C9.83644 9.26143 9.60444 8.72151 9.59591 8.15431L9.55156 4.76301C9.51574 2.12657 7.34927 0.0163973 4.71112 0.0513679C2.07383 0.0863385 -0.0363506 2.25366 -0.000527111 4.89096C0.0344435 7.52825 2.20177 9.63757 4.83821 9.6026L8.02736 9.55996C8.592 9.55228 9.13618 9.76893 9.54133 10.163L9.70424 10.3199C10.1102 10.7157 10.3431 11.2573 10.3508 11.8228L10.3576 12.2723C10.3593 12.2715 10.361 12.2706 10.3627 12.2697C10.0403 12.9171 9.86033 13.6472 9.86971 14.4209C9.8825 15.3455 10.1657 16.2035 10.6382 16.9251C10.6374 17.0138 10.628 17.1017 10.628 17.1921L10.6288 17.2424C10.6356 17.807 10.4199 18.3512 10.0258 18.7555C9.63174 19.1641 9.09097 19.3961 8.52462 19.4037L5.13418 19.4481C2.49603 19.4822 0.386708 21.6495 0.421679 24.2877C0.456649 26.9258 2.62483 29.0343 5.26127 28.9993C7.89941 28.9652 10.0087 26.797 9.97291 24.1589L9.93112 20.9706C9.92344 20.4068 10.1401 19.8618 10.5333 19.4566L10.6902 19.2954C11.086 18.8877 11.6259 18.6549 12.1931 18.648L12.6418 18.6421C12.6409 18.6387 12.6384 18.6344 12.6366 18.6301C13.2422 18.9039 13.9144 19.0566 14.6223 19.0464C17.2127 19.0122 19.2836 16.8833 19.2495 14.2938C19.2435 13.8255 19.1668 13.3735 19.0329 12.9487C19.0764 12.5913 19.1054 12.228 19.1011 11.8569V11.8057C19.0943 11.242 19.3101 10.6969 19.7033 10.2926C20.0973 9.88493 20.6381 9.65293 21.2053 9.6444L24.5966 9.60004C27.2339 9.56422 29.3441 7.39775 29.3091 4.7596C29.2733 2.12231 27.1059 0.0112796 24.4686 0.0479561Z" />
               </g>
               <defs>
                  <clipPath id="clip0">
                     <path d="M0 0H170.588V29H0V0Z" fill="white"/>
                  </clipPath>
               </defs>
            </svg>
            <!--<span class="staging normal">STAGING</span>-->
         </div>
         <div class="subnavMenu back-yapily">
            <a href="index.html"><button class="secondary prototype">&larr; Demos & Guides</button></a>
         </div>
      </header>
      <main>
         <div class="subgrid2 card opacity ">
            <div class=" ">
               <div class="flex justify-center" >
                  <div class="iphone rocket">
                     <div class="iphone-content rocket flex justify-space-between">
                       <div class="align-center mobile-header margin-bottom-normal ">
                          <div class="float-left">
                             <button class="secondary " onclick="goBack()">
                                <svg width="16" height="24" viewBox="0 0 16 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                   <path d="M15.1414 4.09429L7.23573 12L15.1414 19.9057C15.33 20.0943 15.4243 20.3176 15.4243 20.5757C15.4243 20.8337 15.33 21.0571 15.1414 21.2457L12.67 23.7171C12.4814 23.9057 12.2581 24 12 24C11.7419 24 11.5186 23.9057 11.33 23.7171L0.282878 12.67C0.0942928 12.4814 0 12.2581 0 12C0 11.7419 0.0942928 11.5186 0.282878 11.33L11.33 0.282878C11.5186 0.0942928 11.7419 0 12 0C12.2581 0 12.4814 0.0942928 12.67 0.282878L15.1414 2.75434C15.33 2.94293 15.4243 3.16625 15.4243 3.42432C15.4243 3.68238 15.33 3.90571 15.1414 4.09429Z" fill="#FFC701"/>
                                </svg>
                             </button>
                          </div>
                          <div class="text-center">
                             <h2 class="no-margin align-self-center right-32">Rocket Shop</h2>
                          </div>
                       </div>

                       <div class="mobile ">
                         <div class= "safeconnect special2 yellow">
                            <div class="">

                               <!--end column2-->
                               <div class="margin-bottom-big">
                                  <small>  To consent to this transaction check the details below.
                                          When you continue we will securely re-direct you to your bank where you will be asked to confirm the payment.
                               </small>

                                  <p>
                                               <h2>Payment total: <em>¬£62.90</em></h2>
                                  <h3>Payee</h3>
                                  <ul class="dets2 ">


                                     <li>Payee name: <em>Rocket Shop Ltd</em></li>
                                     <li>Sort code: <em>55-66-77</em></li>
                                     <li>Account number: <em>99998888</em> </li>
                                     <li>Payment ref: <em>rckshp-2389593</em> </li>
                                  </ul>
                                  <h3>Payment information</h3>
                                  <ul class="dets2">

                                     <li>Bank name: <em>Monzo</em>
                                     <li>Sort code: <em>04-00-04</em></li>
                                     <li>Account number: <em>12345678</em> </li>
                                  </ul>
                                  </p>


                               </div>

                               <!--end column1-->
                            </div>
                            <!--end subgrid2-->
                         </div>
                       </div>
                                                    <div class="subgrid2 padding-around-normal sticky-footer2"><button class="secondary width-100">Decline</button><a class="prototype" href="guide-payments3rba.html"><button class="primary  width-100 cta ">Continue</button></a></div>

                     </div>
                  </div>
                  <!--subgrid2--->
               </div>
            </div>
            <div class="no-code margin-bottom-big flex ">
               <div>
                  <div class="margin-bottom-big">
                    <div class="pagination flex light-text justify-flex-end margin-bottom-big">

                       <div class="pages"> <a href="guide-payments2ra.html" class="prototype"><button class="secondary">&larr; </button></a><span class="current-number">3 of 6</span><a href="guide-payments3rba.html" class="prototype"><button class="secondary cta">&rarr;</button></a>
                       </div>
                    </div>
                    <div class="margin-bottom-big">
                   <span>üì±In your app</span>
                     <h1> Displaying the Consent Screen</h1>
                     <p>
                      As a PISP, before you are able to initiate  this payment, you will need to clearly inform the user that by clicking ‚ÄúContinue‚Äù, they will be giving consent for RocketShop to execute a one-off payment from their bank account on their behalf. You should also inform the user that RocketShop is authorised by the FCA to do this.


                     </p>
                   </div>

                     <div class="margin-bottom-big">

   <h2>
Behind the scenes </h2>
                     <p>
                       Now that you have the amount and the user‚Äôs choice of bank for the payment, once the user selects ‚ÄúContinue‚Äù, along with the RocketShop account details:
                       <ul>
                        <li>Sort Code: 55-66-77</li>
                      <li> Account number: 99998888</li>
                    </ul>

                       </p>
                       <p>
                         You can execute <em>POST /create-auth-payments</em>. Specify <code>application-user-id</code> to link your unique identifier for the user to the payment and a <a href="https://docs.yapily.com/?version=latest#using-a-callback" target="_blank" rel= "noopener" rel= "noopener" >callback url</a> for the coupled flow:
                       </p>
                         </div>

                         <div class="margin-bottom-big">
                                                 <h3 class="no-margin">Request Body:</h3>
                                                 <pre class="margin-bottom-big">
                                     <code>
{
    "applicationUserId": "rs-38509384845905",
    "institutionId": "monzo_ob",
    "callback": "https://app.rocket-shop.com/callback",
    "paymentRequest": {
        "type": "DOMESTIC_PAYMENT",
        "paymentIdempotencyId": "1d54cf71bfe44b1b8e67247aed455d52",
        "reference": "rckshp-2389593",
        "amount": {
            "amount": "62.90",
            "currency": "GBP"
        },
        "payee": {
            "name": "Rocket Shop Ltd",
            "accountIdentifications": [
                {
                    "type": "ACCOUNT_NUMBER",
                    "identification": "99998888"
                },
                {
                    "type": "SORT_CODE",
                    "identification": "556677"
                }
            ],
            "address": {
                "country": "GB"
            }
        }
    }
}

                                   </code></pre>
                                 </div>
                                 <div class="margin-bottom-big">
                                 <p>A successful request will give you an authorisationUrl. Use this url to redirect the user to Monzo in order to authorise the payment to RocketShop:</p>
</div>


                                                          <div class="margin-bottom-big">
                                                                                  <h3 class="no-margin">Response:</h3>
                                                                                  <pre class="margin-bottom-big">
                                                                      <code>
                                                                        {
              "meta": {
                "tracingId": "f804158e6894c6a6204283a85f8b979f"
              },
              "data": {
                "id": "6072fa73-7804-4371-98c2-a388caadb9c2",
                "userUuid": "cf10ff85-f6a9-4374-b9f8-292d6afaa677",
                "applicationUserId": "rs-38509384845905",
                "institutionId": "monzo_ob",
                "status": "AWAITING_AUTHORIZATION",
                "createdAt": "2020-05-28T09:01:31.309Z",
                "featureScope": [
                  "EXISTING_PAYMENTS_DETAILS",
                  "EXISTING_PAYMENT_INITIATION_DETAILS",
                  "CREATE_DOMESTIC_SINGLE_PAYMENT"
                ],
                "state": "6f8e78836867473a81e88b02a82ce50a",
                "authorisationUrl": "https://verify.monzo.com/open-banking/authorize?client_id=oauth2client_00009pp1CRt4KarIZM7Pr1&response_type=code+id_token&state=2d2c3372af3244cf8ab96b7deec80ee2&nonce=2d2c3372af3244cf8ab96b7deec80ee2&scope=openid+accounts&redirect_uri=https%3A%2F%2Fauth.yapily.com%2F&request=eyJraWQiOiJPNWp3ZXpxTlNzeVlacHotZHpfVUhEbkJINHciLCJhbGciOiJQUzI1NiJ9.eyJhdWQiOiJodHRwczovL2FwaS5tb256by5jb20vb3Blbi1iYW5raW5nLyIsInNjb3BlIjoib3BlbmlkIGFjY291bnRzIiwiaXNzIjoib2F1dGgyY2xpZW50XzAwMDA5cHAxQ1J0NEthcklaTTdQcjEiLCJjbGllbnRfaWQiOiJvYXV0aDJjbGllbnRfMDAwMDlwcDFDUnQ0S2FySVpNN1ByMSIsInJlc3BvbnNlX3R5cGUiOiJjb2RlIGlkX3Rva2VuIiwicmVkaXJlY3RfdXJpIjoiaHR0cHM6Ly9hdXRoLnlhcGlseS5jb20vIiwic3RhdGUiOiIyZDJjMzM3MmFmMzI0NGNmOGFiOTZiN2RlZWM4MGVlMiIsImNsYWltcyI6eyJpZF90b2tlbiI6eyJhY3IiOnsidmFsdWVzIjpbInVybjpvcGVuYmFua2luZzpwc2QyOnNjYSJdLCJlc3NlbnRpYWwiOnRydWV9LCJvcGVuYmFua2luZ19pbnRlbnRfaWQiOnsidmFsdWUiOiJvYmFpc3BhY2NvdW50aW5mb3JtYXRpb25jb25zZW50XzAwMDA5dlY1ZGhzcGt6bjBsb3k1S3IiLCJlc3NlbnRpYWwiOnRydWV9fSwidXNlcmluZm8iOnsib3BlbmJhbmtpbmdfaW50ZW50X2lkIjp7InZhbHVlIjoib2JhaXNwYWNjb3VudGluZm9ybWF0aW9uY29uc2VudF8wMDAwOXZWNWRoc3Brem4wbG95NUtyIiwiZXNzZW50aWFsIjp0cnVlfX19LCJub25jZSI6IjJkMmMzMzcyYWYzMjQ0Y2Y4YWI5NmI3ZGVlYzgwZWUyIiwianRpIjoiYmUzNTkxMGUtNTlkYy00ZjY1LTk2ZGEtZjVmNDc3NGMxOTMxIiwiaWF0IjoxNTkwNjU2NDkxLCJleHAiOjE1OTA2NTgyOTF9.UlO8HxOonRUbfGqd0K6U3srQbhAoGDJjfGjtyh0lYhEug69_htjPX3EkCaHxbfG5PcBbMrzBEVTihytYKiNek1HkX0VkZazcPY1SC5SNF3UvmegXMwf79ooxJnqOziD84ddKhHtKcBn_6JVwJGZQ9EFAfMxVxld079EG4P-K17X3FMRIk1mqXYevdIr8Tm9cY37D1bJsZsBKwr80j5CyHFfwKjo8OYKBhS7GRpbroOgS1VaPn-b_Gtss3kgXtN4ynZegqvdFMatw0Qm7d3ySHg1DkL_3YcR9gPLLF6fW4KMXZZCbnN21DBv3xX_CMnTdFcML-CMQqdaM5EXEzxXgtw",
                "qrCodeUrl": "https://images.yapily.com/image/8eedb239-c7ee-4362-ae68-ccf75cab5392/1604935224?size=0"
              }
            }                                                                  

                                                                    </code></pre>
                                                                  </div>

                  </div>

               </div>
            </div>
         </div>
         <script>
            const Yapily = {};
         </script>
         <script src="js/accordion2.js"></script>
         <script src="js/index6.js"></script>
      </main>
   </body>
</html>
